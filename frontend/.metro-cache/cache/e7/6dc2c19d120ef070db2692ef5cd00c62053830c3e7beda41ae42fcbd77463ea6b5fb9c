{"dependencies":[{"name":"../threads","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":14},"end":{"line":2,"column":48,"index":62}}],"key":"K1yKq+VUoHdgwBY7Fz9TrE1h5uU=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.prepareUIRegistry = undefined;\n  var _threads = require(_dependencyMap[0]);\n  var _worklet_5591855314696_init_data = {\n    code: \"function reactNativeReanimated_FrameCallbackRegistryUITs1(){const frameCallbackRegistry={frameCallbackRegistry:new Map(),activeFrameCallbacks:new Set(),previousFrameTimestamp:null,nextCallId:0,runCallbacks:function(callId){var _this=this;const loop=function(timestamp){if(callId!==_this.nextCallId){return;}if(_this.previousFrameTimestamp===null){_this.previousFrameTimestamp=timestamp;}const delta=timestamp-_this.previousFrameTimestamp;_this.activeFrameCallbacks.forEach(function(callbackId){const callbackDetails=_this.frameCallbackRegistry.get(callbackId);const{startTime:startTime}=callbackDetails;if(startTime===null){callbackDetails.startTime=timestamp;callbackDetails.callback({timestamp:timestamp,timeSincePreviousFrame:null,timeSinceFirstFrame:0});}else{callbackDetails.callback({timestamp:timestamp,timeSincePreviousFrame:delta,timeSinceFirstFrame:timestamp-startTime});}});if(_this.activeFrameCallbacks.size>0){_this.previousFrameTimestamp=timestamp;requestAnimationFrame(loop);}else{_this.previousFrameTimestamp=null;}};if(this.activeFrameCallbacks.size===1&&callId===this.nextCallId){requestAnimationFrame(loop);}},registerFrameCallback:function(callback,callbackId){this.frameCallbackRegistry.set(callbackId,{callback:callback,startTime:null});},unregisterFrameCallback:function(callbackId){this.manageStateFrameCallback(callbackId,false);this.frameCallbackRegistry.delete(callbackId);},manageStateFrameCallback:function(callbackId,state){if(callbackId===-1){return;}if(state){this.activeFrameCallbacks.add(callbackId);this.runCallbacks(this.nextCallId);}else{const callback=this.frameCallbackRegistry.get(callbackId);callback.startTime=null;this.activeFrameCallbacks.delete(callbackId);if(this.activeFrameCallbacks.size===0){this.nextCallId+=1;}}}};global._frameCallbackRegistry=frameCallbackRegistry;}\"\n  };\n  var prepareUIRegistry = exports.prepareUIRegistry = (0, _threads.runOnUIImmediately)(function () {\n    var reactNativeReanimated_FrameCallbackRegistryUITs1 = function () {\n      var frameCallbackRegistry = {\n        frameCallbackRegistry: new Map(),\n        activeFrameCallbacks: new Set(),\n        previousFrameTimestamp: null,\n        nextCallId: 0,\n        runCallbacks(callId) {\n          var loop = timestamp => {\n            if (callId !== this.nextCallId) {\n              return;\n            }\n            if (this.previousFrameTimestamp === null) {\n              this.previousFrameTimestamp = timestamp;\n            }\n            var delta = timestamp - this.previousFrameTimestamp;\n            this.activeFrameCallbacks.forEach(callbackId => {\n              var callbackDetails = this.frameCallbackRegistry.get(callbackId);\n              var startTime = callbackDetails.startTime;\n              if (startTime === null) {\n                // First frame\n                callbackDetails.startTime = timestamp;\n                callbackDetails.callback({\n                  timestamp,\n                  timeSincePreviousFrame: null,\n                  timeSinceFirstFrame: 0\n                });\n              } else {\n                // Next frame\n                callbackDetails.callback({\n                  timestamp,\n                  timeSincePreviousFrame: delta,\n                  timeSinceFirstFrame: timestamp - startTime\n                });\n              }\n            });\n            if (this.activeFrameCallbacks.size > 0) {\n              this.previousFrameTimestamp = timestamp;\n              requestAnimationFrame(loop);\n            } else {\n              this.previousFrameTimestamp = null;\n            }\n          };\n\n          // runCallback() should only be called after registering a callback,\n          // so if there is only one active callback, then it means that there were\n          // zero previously and the loop isn't running yet.\n          if (this.activeFrameCallbacks.size === 1 && callId === this.nextCallId) {\n            requestAnimationFrame(loop);\n          }\n        },\n        registerFrameCallback(callback, callbackId) {\n          this.frameCallbackRegistry.set(callbackId, {\n            callback,\n            startTime: null\n          });\n        },\n        unregisterFrameCallback(callbackId) {\n          this.manageStateFrameCallback(callbackId, false);\n          this.frameCallbackRegistry.delete(callbackId);\n        },\n        manageStateFrameCallback(callbackId, state) {\n          if (callbackId === -1) {\n            return;\n          }\n          if (state) {\n            this.activeFrameCallbacks.add(callbackId);\n            this.runCallbacks(this.nextCallId);\n          } else {\n            var callback = this.frameCallbackRegistry.get(callbackId);\n            callback.startTime = null;\n            this.activeFrameCallbacks.delete(callbackId);\n            if (this.activeFrameCallbacks.size === 0) {\n              this.nextCallId += 1;\n            }\n          }\n        }\n      };\n      global._frameCallbackRegistry = frameCallbackRegistry;\n    };\n    reactNativeReanimated_FrameCallbackRegistryUITs1.__closure = {};\n    reactNativeReanimated_FrameCallbackRegistryUITs1.__workletHash = 5591855314696;\n    reactNativeReanimated_FrameCallbackRegistryUITs1.__initData = _worklet_5591855314696_init_data;\n    return reactNativeReanimated_FrameCallbackRegistryUITs1;\n  }());\n});","lineCount":97,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,1,13,"exports"],[7,9,1,13],[7,10,1,13,"prepareUIRegistry"],[7,27,1,13],[7,30,1,13,"undefined"],[7,39,1,13],[8,2,2,0],[8,6,2,0,"_threads"],[8,14,2,0],[8,17,2,0,"require"],[8,24,2,0],[8,25,2,0,"_dependencyMap"],[8,39,2,0],[9,2,2,48],[9,6,2,48,"_worklet_5591855314696_init_data"],[9,38,2,48],[10,4,2,48,"code"],[10,8,2,48],[11,2,2,48],[12,2,29,7],[12,6,29,13,"prepareUIRegistry"],[12,23,29,30],[12,26,29,30,"exports"],[12,33,29,30],[12,34,29,30,"prepareUIRegistry"],[12,51,29,30],[12,54,29,33],[12,58,29,33,"runOnUIImmediately"],[12,85,29,51],[12,87,29,52],[13,4,29,52],[13,8,29,52,"reactNativeReanimated_FrameCallbackRegistryUITs1"],[13,56,29,52],[13,68,29,52,"reactNativeReanimated_FrameCallbackRegistryUITs1"],[13,69,29,52],[13,71,29,58],[14,6,32,2],[14,10,32,8,"frameCallbackRegistry"],[14,31,32,54],[14,34,32,57],[15,8,33,4,"frameCallbackRegistry"],[15,29,33,25],[15,31,33,27],[15,35,33,31,"Map"],[15,38,33,34],[15,39,33,60],[15,40,33,61],[16,8,34,4,"activeFrameCallbacks"],[16,28,34,24],[16,30,34,26],[16,34,34,30,"Set"],[16,37,34,33],[16,38,34,42],[16,39,34,43],[17,8,35,4,"previousFrameTimestamp"],[17,30,35,26],[17,32,35,28],[17,36,35,32],[18,8,36,4,"nextCallId"],[18,18,36,14],[18,20,36,16],[18,21,36,17],[19,8,38,4,"runCallbacks"],[19,20,38,16,"runCallbacks"],[19,21,38,17,"callId"],[19,27,38,23],[19,29,38,25],[20,10,39,6],[20,14,39,12,"loop"],[20,18,39,16],[20,21,39,20,"timestamp"],[20,30,39,37],[20,34,39,42],[21,12,40,8],[21,16,40,12,"callId"],[21,22,40,18],[21,27,40,23],[21,31,40,27],[21,32,40,28,"nextCallId"],[21,42,40,38],[21,44,40,40],[22,14,41,10],[23,12,42,8],[24,12,43,8],[24,16,43,12],[24,20,43,16],[24,21,43,17,"previousFrameTimestamp"],[24,43,43,39],[24,48,43,44],[24,52,43,48],[24,54,43,50],[25,14,44,10],[25,18,44,14],[25,19,44,15,"previousFrameTimestamp"],[25,41,44,37],[25,44,44,40,"timestamp"],[25,53,44,49],[26,12,45,8],[27,12,47,8],[27,16,47,14,"delta"],[27,21,47,19],[27,24,47,22,"timestamp"],[27,33,47,31],[27,36,47,34],[27,40,47,38],[27,41,47,39,"previousFrameTimestamp"],[27,63,47,61],[28,12,49,8],[28,16,49,12],[28,17,49,13,"activeFrameCallbacks"],[28,37,49,33],[28,38,49,34,"forEach"],[28,45,49,41],[28,46,49,43,"callbackId"],[28,56,49,61],[28,60,49,66],[29,14,50,10],[29,18,50,16,"callbackDetails"],[29,33,50,31],[29,36,50,34],[29,40,50,38],[29,41,50,39,"frameCallbackRegistry"],[29,62,50,60],[29,63,50,61,"get"],[29,66,50,64],[29,67,50,65,"callbackId"],[29,77,50,75],[29,78,50,77],[30,14,52,10],[30,18,52,18,"startTime"],[30,27,52,27],[30,30,52,32,"callbackDetails"],[30,45,52,47],[30,46,52,18,"startTime"],[30,55,52,27],[31,14,54,10],[31,18,54,14,"startTime"],[31,27,54,23],[31,32,54,28],[31,36,54,32],[31,38,54,34],[32,16,55,12],[33,16,56,12,"callbackDetails"],[33,31,56,27],[33,32,56,28,"startTime"],[33,41,56,37],[33,44,56,40,"timestamp"],[33,53,56,49],[34,16,58,12,"callbackDetails"],[34,31,58,27],[34,32,58,28,"callback"],[34,40,58,36],[34,41,58,37],[35,18,59,14,"timestamp"],[35,27,59,23],[36,18,60,14,"timeSincePreviousFrame"],[36,40,60,36],[36,42,60,38],[36,46,60,42],[37,18,61,14,"timeSinceFirstFrame"],[37,37,61,33],[37,39,61,35],[38,16,62,12],[38,17,62,13],[38,18,62,14],[39,14,63,10],[39,15,63,11],[39,21,63,17],[40,16,64,12],[41,16,65,12,"callbackDetails"],[41,31,65,27],[41,32,65,28,"callback"],[41,40,65,36],[41,41,65,37],[42,18,66,14,"timestamp"],[42,27,66,23],[43,18,67,14,"timeSincePreviousFrame"],[43,40,67,36],[43,42,67,38,"delta"],[43,47,67,43],[44,18,68,14,"timeSinceFirstFrame"],[44,37,68,33],[44,39,68,35,"timestamp"],[44,48,68,44],[44,51,68,47,"startTime"],[45,16,69,12],[45,17,69,13],[45,18,69,14],[46,14,70,10],[47,12,71,8],[47,13,71,9],[47,14,71,10],[48,12,73,8],[48,16,73,12],[48,20,73,16],[48,21,73,17,"activeFrameCallbacks"],[48,41,73,37],[48,42,73,38,"size"],[48,46,73,42],[48,49,73,45],[48,50,73,46],[48,52,73,48],[49,14,74,10],[49,18,74,14],[49,19,74,15,"previousFrameTimestamp"],[49,41,74,37],[49,44,74,40,"timestamp"],[49,53,74,49],[50,14,75,10,"requestAnimationFrame"],[50,35,75,31],[50,36,75,32,"loop"],[50,40,75,36],[50,41,75,37],[51,12,76,8],[51,13,76,9],[51,19,76,15],[52,14,77,10],[52,18,77,14],[52,19,77,15,"previousFrameTimestamp"],[52,41,77,37],[52,44,77,40],[52,48,77,44],[53,12,78,8],[54,10,79,6],[54,11,79,7],[56,10,81,6],[57,10,82,6],[58,10,83,6],[59,10,84,6],[59,14,84,10],[59,18,84,14],[59,19,84,15,"activeFrameCallbacks"],[59,39,84,35],[59,40,84,36,"size"],[59,44,84,40],[59,49,84,45],[59,50,84,46],[59,54,84,50,"callId"],[59,60,84,56],[59,65,84,61],[59,69,84,65],[59,70,84,66,"nextCallId"],[59,80,84,76],[59,82,84,78],[60,12,85,8,"requestAnimationFrame"],[60,33,85,29],[60,34,85,30,"loop"],[60,38,85,34],[60,39,85,35],[61,10,86,6],[62,8,87,4],[62,9,87,5],[63,8,89,4,"registerFrameCallback"],[63,29,89,25,"registerFrameCallback"],[63,30,90,6,"callback"],[63,38,90,46],[63,40,91,6,"callbackId"],[63,50,91,24],[63,52,92,6],[64,10,93,6],[64,14,93,10],[64,15,93,11,"frameCallbackRegistry"],[64,36,93,32],[64,37,93,33,"set"],[64,40,93,36],[64,41,93,37,"callbackId"],[64,51,93,47],[64,53,93,49],[65,12,94,8,"callback"],[65,20,94,16],[66,12,95,8,"startTime"],[66,21,95,17],[66,23,95,19],[67,10,96,6],[67,11,96,7],[67,12,96,8],[68,8,97,4],[68,9,97,5],[69,8,99,4,"unregisterFrameCallback"],[69,31,99,27,"unregisterFrameCallback"],[69,32,99,28,"callbackId"],[69,42,99,46],[69,44,99,48],[70,10,100,6],[70,14,100,10],[70,15,100,11,"manageStateFrameCallback"],[70,39,100,35],[70,40,100,36,"callbackId"],[70,50,100,46],[70,52,100,48],[70,57,100,53],[70,58,100,54],[71,10,101,6],[71,14,101,10],[71,15,101,11,"frameCallbackRegistry"],[71,36,101,32],[71,37,101,33,"delete"],[71,43,101,39],[71,44,101,40,"callbackId"],[71,54,101,50],[71,55,101,51],[72,8,102,4],[72,9,102,5],[73,8,104,4,"manageStateFrameCallback"],[73,32,104,28,"manageStateFrameCallback"],[73,33,104,29,"callbackId"],[73,43,104,47],[73,45,104,49,"state"],[73,50,104,63],[73,52,104,65],[74,10,105,6],[74,14,105,10,"callbackId"],[74,24,105,20],[74,31,105,27],[74,33,105,29],[75,12,106,8],[76,10,107,6],[77,10,108,6],[77,14,108,10,"state"],[77,19,108,15],[77,21,108,17],[78,12,109,8],[78,16,109,12],[78,17,109,13,"activeFrameCallbacks"],[78,37,109,33],[78,38,109,34,"add"],[78,41,109,37],[78,42,109,38,"callbackId"],[78,52,109,48],[78,53,109,49],[79,12,110,8],[79,16,110,12],[79,17,110,13,"runCallbacks"],[79,29,110,25],[79,30,110,26],[79,34,110,30],[79,35,110,31,"nextCallId"],[79,45,110,41],[79,46,110,42],[80,10,111,6],[80,11,111,7],[80,17,111,13],[81,12,112,8],[81,16,112,14,"callback"],[81,24,112,22],[81,27,112,25],[81,31,112,29],[81,32,112,30,"frameCallbackRegistry"],[81,53,112,51],[81,54,112,52,"get"],[81,57,112,55],[81,58,112,56,"callbackId"],[81,68,112,66],[81,69,112,68],[82,12,113,8,"callback"],[82,20,113,16],[82,21,113,17,"startTime"],[82,30,113,26],[82,33,113,29],[82,37,113,33],[83,12,115,8],[83,16,115,12],[83,17,115,13,"activeFrameCallbacks"],[83,37,115,33],[83,38,115,34,"delete"],[83,44,115,40],[83,45,115,41,"callbackId"],[83,55,115,51],[83,56,115,52],[84,12,116,8],[84,16,116,12],[84,20,116,16],[84,21,116,17,"activeFrameCallbacks"],[84,41,116,37],[84,42,116,38,"size"],[84,46,116,42],[84,51,116,47],[84,52,116,48],[84,54,116,50],[85,14,117,10],[85,18,117,14],[85,19,117,15,"nextCallId"],[85,29,117,25],[85,33,117,29],[85,34,117,30],[86,12,118,8],[87,10,119,6],[88,8,120,4],[89,6,121,2],[89,7,121,3],[90,6,123,2,"global"],[90,12,123,8],[90,13,123,9,"_frameCallbackRegistry"],[90,35,123,31],[90,38,123,34,"frameCallbackRegistry"],[90,59,123,55],[91,4,124,0],[91,5,124,1],[92,4,124,1,"reactNativeReanimated_FrameCallbackRegistryUITs1"],[92,52,124,1],[92,53,124,1,"__closure"],[92,62,124,1],[93,4,124,1,"reactNativeReanimated_FrameCallbackRegistryUITs1"],[93,52,124,1],[93,53,124,1,"__workletHash"],[93,66,124,1],[94,4,124,1,"reactNativeReanimated_FrameCallbackRegistryUITs1"],[94,52,124,1],[94,53,124,1,"__initData"],[94,63,124,1],[94,66,124,1,"_worklet_5591855314696_init_data"],[94,98,124,1],[95,4,124,1],[95,11,124,1,"reactNativeReanimated_FrameCallbackRegistryUITs1"],[95,59,124,1],[96,2,124,1],[96,3,29,52],[96,5,124,1],[96,6,124,2],[97,0,124,3],[97,3]],"functionMap":{"names":["<global>","runOnUIImmediately$argument_0","frameCallbackRegistry.runCallbacks","loop","activeFrameCallbacks.forEach$argument_0","frameCallbackRegistry.registerFrameCallback","frameCallbackRegistry.unregisterFrameCallback","frameCallbackRegistry.manageStateFrameCallback"],"mappings":"AAA;oDC4B;ICS;mBCC;0CCU;SDsB;ODQ;KDQ;IIE;KJQ;IKE;KLG;IME;KNgB;CDI"}},"type":"js/module"}]}